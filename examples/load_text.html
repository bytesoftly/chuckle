<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>1sec updates | chuckle.js</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/css/bootstrap.min.css" integrity="sha384-2hfp1SzUoho7/TsGGGDaFdsuuDL0LX2hnUp6VkX3CUQ2K4K+xjboZdsXyp4oUHZj" crossorigin="anonymous">

    <!-- LOOK HERE: Make sure to include jQuery before chuckle (since it's a dependency) -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="../src/chuckle.js"></script>

    <!-- LOOK HERE: Defining endpoint(s) to be referenced in DOM tags -->
    <script>

    // add two text endpoints
    chuckle.addEndpoint('rand1', { url: 'api/random1' });
    chuckle.addEndpoint('rand2', { url: 'api/random2' });
    chuckle.addEndpoint('loginLink', { url: 'api/a_link' });

    // turn logging on (open up the console to have a look)
    chuckle.setVerbose(true);

    </script>

    <style>
      body {
        text-align: center;
        padding: 15px;
      }
    </style>

  <body>
    <h2>Loading text</h2>

    <!-- LOOK HERE: A block of text with elements dynamically loading their values directly -->
    <p>This is a block of text with auto-updating numbers. Look at this one for example: <span data-c-endpoint='rand1' data-c-interval='1'></span>. It was randomly generated and could be anything from 1 to 100. Here's another: <span data-c-endpoint='rand2' data-c-interval='1'></span>. It's the same as the first number (<span data-c-endpoint='rand1' data-c-interval='1'></span>) in every way - both generated on your CPU from, both sent through the network to your browser but <span data-c-endpoint='rand2' data-c-interval='1'></span> and <span data-c-endpoint='rand1' data-c-interval='1'></span> only have a 1% chance of actually being the same. It'll happen if you sit here long enough.</p>
    <p>
      Whoopsy, looks like we got some unexpected html: <span data-c-endpoint='loginLink'></span>
      <br/>
      Chuckle escapes content received as text to prevent injection - this can be overridden like so:
      <br />
      Some expected html from an endpoint (directly written to page): <span data-c-endpoint='loginLink' data-c-val='c'></span>
    </p>
  </body>
</html>
